<!-- START: Metric Accordion Component -->
<style>
    /* Scoped styles for the metric accordion */
    .metric-accordion {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-top: 15px;
    }

    .metric-item {
        background-color: rgba(255, 255, 255, 0.5); /* Slight white tint */
        border: 1px solid #ccc;
        border-radius: 8px;
        overflow: hidden;
        transition: all 0.3s ease;
    }

    .metric-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        cursor: pointer;
        background-color: rgba(0, 0, 0, 0.03);
    }

    .metric-header:hover {
        background-color: rgba(0, 0, 0, 0.07);
    }

    .metric-title-group {
        display: flex;
        flex-direction: column;
    }

    .metric-name {
        font-weight: bold;
        font-size: 1.1em;
        color: #0143f8; /* Matching your blue theme */
    }

    .metric-short {
        font-size: 0.9em;
        color: #555;
        font-style: italic;
    }

    .metric-arrow {
        font-size: 1.2em;
        transition: transform 0.3s ease;
        color: #0143f8;
    }

    .metric-item.active .metric-arrow {
        transform: rotate(180deg);
    }

    .metric-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
        padding: 0 15px;
        background-color: white;
    }

    .metric-content-inner {
        padding: 15px 0;
        font-size: 0.95em;
        line-height: 1.6;
        color: #333;
    }

    .metric-formula {
        background-color: #f4f4f4;
        padding: 5px 10px;
        border-radius: 4px;
        font-family: monospace;
        font-size: 0.9em;
        display: inline-block;
        margin-bottom: 10px;
        border: 1px solid #ddd;
    }

    .metric-label {
        font-weight: bold;
        margin-right: 5px;
    }
</style>

<div class="important_info">
    <p>We operationalized language quality using four distinct dimensions. Click on each metric to see how it is calculated and why it matters.</p>
    
    <div class="metric-accordion">
        
        <!-- Metric 1: Lexical Richness -->
        <div class="metric-item">
            <div class="metric-header" onclick="toggleMetric(this)">
                <div class="metric-title-group">
                    <span class="metric-name">Lexical Richness</span>
                    <span class="metric-short">The diversity of vocabulary used.</span>
                </div>
                <span class="metric-arrow">▼</span>
            </div>
            <div class="metric-content">
                <div class="metric-content-inner">
                    <div class="metric-formula">Formula: Unique Words / Total Words (Type-Token Ratio)</div>
                    <p><span class="metric-label">Justification:</span> This metric measures vocabulary diversity. A score of 1.0 means every word in the post is unique, while a low score indicates high repetition.</p>
                    <p><span class="metric-label">Why we chose it:</span> High-quality discourse usually avoids excessive repetition and employs a precise, varied vocabulary to convey nuance. Low lexical richness often correlates with low-effort spam or "circlejerk" repetition.</p>
                </div>
            </div>
        </div>

        <!-- Metric 2: Syntactic Complexity -->
        <div class="metric-item">
            <div class="metric-header" onclick="toggleMetric(this)">
                <div class="metric-title-group">
                    <span class="metric-name">Syntactic Complexity</span>
                    <span class="metric-short">The structural elaboratedness of sentences.</span>
                </div>
                <span class="metric-arrow">▼</span>
            </div>
            <div class="metric-content">
                <div class="metric-content-inner">
                    <div class="metric-formula">Formula: Average Words per Sentence</div>
                    <p><span class="metric-label">Justification:</span> This acts as a proxy for grammatical complexity. Longer sentences typically require the use of conjunctions, subordinate clauses, and more advanced grammar to remain coherent.</p>
                    <p><span class="metric-label">Why we chose it:</span> While brevity is sometimes wit, in the context of online argumentation, extremely short sentences often indicate fragmentation, memes, or reactive emotional outbursts rather than constructed arguments.</p>
                </div>
            </div>
        </div>

        <!-- Metric 3: Readability -->
        <div class="metric-item">
            <div class="metric-header" onclick="toggleMetric(this)">
                <div class="metric-title-group">
                    <span class="metric-name">Readability (ARI)</span>
                    <span class="metric-short">The education level required to understand the text.</span>
                </div>
                <span class="metric-arrow">▼</span>
            </div>
            <div class="metric-content">
                <div class="metric-content-inner">
                    <div class="metric-formula">Formula: 4.71(chars/words) + 0.5(words/sentences) - 21.43</div>
                    <p><span class="metric-label">Justification:</span> We used the Automated Readability Index (ARI). Unlike other metrics that rely on syllable counting (which is computationally expensive and prone to error on internet slang), ARI relies on character count and sentence length.</p>
                    <p><span class="metric-label">Why we chose it:</span> It combines word complexity (length) and sentence complexity to estimate the "Grade Level" of the text. A higher index suggests a text that requires more literacy to parse.</p>
                </div>
            </div>
        </div>

        <!-- Metric 4: Cognitive Depth -->
        <div class="metric-item">
            <div class="metric-header" onclick="toggleMetric(this)">
                <div class="metric-title-group">
                    <span class="metric-name">Cognitive Depth</span>
                    <span class="metric-short">The presence of reasoning and complex thought.</span>
                </div>
                <span class="metric-arrow">▼</span>
            </div>
            <div class="metric-content">
                <div class="metric-content-inner">
                    <div class="metric-formula">Formula: Mean(LIWC_CogMech + LIWC_Insight + LIWC_Cause)</div>
                    <p><span class="metric-label">Justification:</span> We aggregate three LIWC (Linguistic Inquiry and Word Count) categories that track words related to: Cognitive Mechanisms (thinking, processing), Insight (understand, know, think), and Causality (because, effect, hence).</p>
                    <p><span class="metric-label">Why we chose it:</span> This distinguishes between descriptive/emotional text and analytical text. A post can be long and use big words but say nothing (word salad). This metric checks if the user is actually <i>reasoning</i>.</p>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
    function toggleMetric(element) {
        // Toggle the active class on the parent item
        const item = element.parentElement;
        item.classList.toggle('active');

        // Handle the max-height for the slide effect
        const content = item.querySelector('.metric-content');
        if (content.style.maxHeight) {
            content.style.maxHeight = null;
        } else {
            content.style.maxHeight = content.scrollHeight + "px";
        }
    }
</script>
<!-- END: Metric Accordion Component -->
